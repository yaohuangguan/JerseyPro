{"version":3,"sources":["components/Signup/Form-input.jsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","components/Signup/Signup.jsx"],"names":["Form","handleChange","label","otherProps","className","onChange","value","length","_toConsumableArray","arr","Array","isArray","i","arr2","iter","Symbol","iterator","Object","prototype","toString","call","from","TypeError","Signup","props","validEmail","test","state","email","getEmail","e","setState","target","send","handleSubmit","a","preventDefault","displayName","password","passwordConf","prevState","errors","auth","createUserWithEmailAndPassword","user","createUser","history","push","console","log","code","name","document","querySelector","classList","add","style","display","remove","this","src","width","alt","onSubmit","type","id","disabled","React","Component"],"mappings":"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","file":"static/js/5.fce5e882.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./form-input.styles.scss\";\nconst Form = ({ handleChange, label, ...otherProps }) => (\n  <div className='group'>\n    <input className='form-input' onChange={handleChange} {...otherProps} />\n    {label ? (\n      <label\n        className={`${\n          otherProps.value.length ? \"shrink\" : \"\"\n        } form-input-label`}\n      >\n        {label}\n      </label>\n    ) : null}\n  </div>\n);\n\nexport default Form;\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import React from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport FormInput from \"./Form-input\";\nimport { auth, createUser } from \"../../firebase/firebase\";\nimport \"./Signin.scss\";\nclass Signup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      displayName: \"\",\n      email: \"\",\n      password: \"\",\n      passwordConf: \"\",\n      errors: [],\n      send: false\n    };\n  }\n  validEmail = () => {\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(this.state.email);\n  };\n  getEmail = e => {\n    this.setState({ email: e.target.value }, () => {\n      this.validEmail()\n        ? this.setState({ send: true })\n        : this.setState({ send: false });\n    });\n  };\n  handleSubmit = async e => {\n    e.preventDefault();\n    const { displayName, email, password, passwordConf } = this.state;\n    if (password !== passwordConf) {\n      this.setState(prevState => ({\n        errors: [\"密码不匹配，请确认\", ...prevState.errors]\n      }));\n      return;\n    }\n    if (!displayName || !email || !password || !passwordConf) {\n      this.setState({\n        errors: \"请输入完整的账号信息\"\n      });\n      return;\n    }\n    try {\n      const { user } = await auth.createUserWithEmailAndPassword(\n        email,\n        password\n      );\n      await createUser(user, { displayName });\n      this.setState({\n        displayName: \"\",\n        email: \"\",\n        password: \"\",\n        passwordConf: \"\",\n        errors: []\n      });\n      this.props.history.push(\"/\");\n    } catch (error) {\n      console.log(error);\n      if (error.code === \"auth/weak-password\") {\n        this.setState({\n          errors: \"请输入至少6位以上密码\"\n        });\n      }\n      if (error.code === \"auth/network-request-failed\") {\n        this.setState({\n          errors: \"网络错误，请检查你的网络连接\"\n        });\n      }\n      if (error.code === \"auth/email-already-in-use\") {\n        this.setState({\n          errors: \"邮箱已经被注册了\"\n        });\n      }\n    }\n  };\n  handleChange = e => {\n    const { value, name } = e.target;\n    this.setState({ [name]: value });\n  };\n  componentDidMount() {\n    document.querySelector(\".relative\").classList.add(\"background\");\n    document.querySelector(\".logoText\").classList.add(\"logo-b\");\n    document.querySelector(\".logo\").classList.add(\"text-center\");\n    document.querySelector(\".options\").style.display = \"none\";\n    console.log(\"changed to linear\");\n  }\n  componentWillUnmount() {\n    document.querySelector(\".logoText\").classList.remove(\"logo-b\");\n    document.querySelector(\".logo\").classList.remove(\"text-center\");\n    document.querySelector(\".relative\").classList.remove(\"background\");\n    document.querySelector(\".options\").style.display = \"flex\";\n    console.log(\"changed away linear\");\n  }\n  render() {\n    const {\n      displayName,\n      email,\n      password,\n      passwordConf,\n      errors,\n      send\n    } = this.state;\n    return (\n      <div className=\"container\">\n        <br />\n        <br />\n        <br />\n        <br />\n        <div className=\"row flex\">\n          <div className=\"start\">\n            <img\n              src={\"https://media.giphy.com/media/woIKv4f7TETgQ/giphy.gif\"}\n              width=\"100%\"\n              alt=\"the\"\n            />\n          </div>\n          <div>\n            <h2 className=\"h3-responsive text-center text-white my-4\">\n              注册新账户\n            </h2>\n\n            <form onSubmit={this.handleSubmit}>\n              {errors ? (\n                <div className=\"text-danger font-weight-bold\">{errors}</div>\n              ) : null}\n              <FormInput\n                type=\"text\"\n                name=\"displayName\"\n                value={displayName}\n                id=\"displayName\"\n                label=\"用户名\"\n                handleChange={this.handleChange}\n              />{\" \"}\n              <FormInput\n                type=\"email\"\n                name=\"email\"\n                value={email}\n                id=\"email\"\n                label=\"邮箱\"\n                handleChange={this.handleChange}\n                onChange={this.getEmail}\n              />\n              <FormInput\n                type=\"password\"\n                name=\"password\"\n                label=\"密码\"\n                value={password}\n                handleChange={this.handleChange}\n                id=\"password\"\n              />{\" \"}\n              <FormInput\n                type=\"password\"\n                name=\"passwordConf\"\n                label=\"确认密码\"\n                value={passwordConf}\n                handleChange={this.handleChange}\n                id=\"passwordConf\"\n              />\n              <div className=\"text-center\">\n                <input\n                  type=\"submit\"\n                  className=\"btn btn-warning mr-4\"\n                  value=\"注册\"\n                  disabled={!send}\n                />\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Signup;\n"],"sourceRoot":""}